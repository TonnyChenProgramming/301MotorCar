* C:\LocalProject\301MotorCar\LTspice hardware\Compsys305.asc
V1 N001 0 5
C1 Vfiltered N002 150nf
R2 Vfiltered 0 100k
R1 N002 0 50k
I1 N001 N002 SINE(88uA 2uA 100)
V2 V5 0 5
R3 V5 V_halfVolt 270k
R4 V_halfVolt 0 30k
XU2 N003 V_halfVolt V5 0 Vsch LM324
V3 Vsin 0 SINE(0 1.27 100)
C2 Vdc 0 150nf
R5 Vdc Vsch 100k
XLM324 Vdc V_halfVolt V5 0 Vout LM324
R8 V5 GPIO 1k
D1 Vsin N003 D
.model D D
.lib C:\Users\cta10\AppData\Local\LTspice\lib\cmp\standard.dio
.tran 0 1 0 0.1ms
* Phototransistor Circuit & Filter circuit
* Voltage Divder Circuit
.lib LM324.lib
* Comparator1
* RC filter to convert PWM wave into DC wave
* DC wave to digital Output
* open drain configuration
* The output of comparator 339N is the collector of the bjt... so connect it with a open drain circuit with 5v supply solve the problem, and provide reliable input to the GPIO input pin
.backanno
.end
